<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gpxies.ru API</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

</head>

<body>
  <div class="">
    <h2>Welcome to GPXIES.RU API!</h2>
    <p>
      Root url is <a href="https://api.gpxies.ru">https://api.gpxies.ru</a>.
    </p>

    <table class="table">
      <thead>
        <tr class="thead-dark">
          <th scope="col">
            Type
          </th>
          <th scope="col">
            URL
          </th>
          <th scope="col">
            Headers
          </th>
          <th scope="col">
            Request body
          </th>
          <th scope="col">
            Response
          </th>
          <th scope="col">
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="thead-light">
          <th scope="rowgroup" colspan="6">
            Users
          </th>
        </tr>
        <!-- Create -->
        <tr>
          <td>
            POST
          </td>
          <td>
            /users
          </td>
          <td>
            Content-Type: application/json
          </td>
          <td>
            <code>
                            <pre>{
  "username":"popov",
  "email":"popov@yandex.ru",
  "password":"pass2021",
  "confirm_password":"pass2021"
}</pre>
                        </code>


          </td>
          <td>
            OK: 201, error: 4xx
          </td>
          <td>
            Create user
          </td>
        </tr>
        <!-- Login -->
        <tr>
          <td>
            POST
          </td>
          <td>
            /users/login
          </td>
          <td>
            Content-Type: application/json
          </td>
          <td>
            <code>
                            <pre>{
  "email":"popov@yandex.ru",
  "password":"pass2021"
}</pre>
                        </code>
          </td>
          <td>
            OK: 201, error: 401<br>
            <code>
                            <pre>{
  "id": 1,
  "username": "popov",
  "email": "popov@yandex.ru",
  "role": "User",
  "token": "eyJhbGciOiJ..."
}</pre>
                        </code>

          </td>
          <td>
            Login
          </td>
        </tr>
        <!-- Get all -->
        <tr>
          <td>
            GET
          </td>
          <td>
            /users
          </td>
          <td>
            Authorization: Bearer {token}
          </td>
          <td>
            <code>

            </code>
          </td>
          <td>
            OK: 200, error: 4XX<br>
            <code>
                            <pre>[
  {
    "id": 1,
    "username": "popov",
    "email": "popov@yandex.ru",
    "role": "User"
  }
]</pre>
                        </code>

          </td>
          <td>
            Get all users
          </td>
        </tr>

        <!-- Get user with id-->
        <tr>
          <td>
            GET
          </td>
          <td>
            /users/id/:1
          </td>
          <td>
            Authorization: Bearer {token}
          </td>
          <td>
            <code>

    </code>
          </td>
          <td>
            OK: 200, error: 4XX<br>
            <code>
                    <pre>{
  "id": 1,
  "username": "popov",
  "email": "popov@yandex.ru",
  "role": "User"
}</pre>
                </code>

          </td>
          <td>
            Get user with id=1
          </td>
        </tr>
        <!-- Get user with name -->
        <tr>
          <td>
            GET
          </td>
          <td>
            /users/username/:popov
          </td>
          <td>
            Authorization: Bearer {token}
          </td>
          <td>
            <code>

    </code>
          </td>
          <td>
            OK: 200, error: 4XX<br>
            <code>
                    <pre>{
  "id": 1,
  "username": "popov",
  "email": "popov@yandex.ru",
  "role": "User"
}</pre>
                </code>

          </td>
          <td>
            Get user with username=popov
          </td>
        </tr>

        <!-- Get whoami-->
        <tr>
          <td>
            GET
          </td>
          <td>
            /users/whoami
          </td>
          <td>
            Authorization: Bearer {token}
          </td>
          <td>
            <code>

    </code>
          </td>
          <td>
            OK: 200, error: 4XX<br>
            <code>
                    <pre>{
  "id": 1,
  "username": "popov",
  "email": "popov@yandex.ru",
  "role": "User"
}</pre>
                </code>

          </td>
          <td>
            Get the current user details
          </td>
        </tr>
        <!-- Update user -->
        <tr>
          <td>
            PATCH
          </td>
          <td>
            /users/id/:1
          </td>
          <td>
            Authorization: Bearer {token}<br>
            Content-Type: application/json
          </td>
          <td>
            <code><pre>{
  "role":"Admin"
}</pre>
    </code>
          </td>
          <td>
            OK: 200, error: 4XX<br>
            <code>
                    <pre>{
  "message": "Updated faild",
  "info": "Rows matched: 
      1 Changed: 0 Warnings: 0"
}</pre>
                </code>

          </td>
          <td>
            Update user with id=1
          </td>
        </tr>
        <!-- Delete user -->
        <tr>
          <td>
            DELETE
          </td>
          <td>
            /users/id/:1
          </td>
          <td>
            Authorization: Bearer {token}<br>
            Content-Type: application/json
          </td>
          <td>
            <code>
    </code>
          </td>
          <td>
            OK: 200, error: 4XX
          </td>
          <td>
            Delete user with id=1
          </td>
        </tr>
        <!-- TRACKS -->
        <tr class="thead-light">
          <th scope="rowgroup" colspan="6">
            Tracks
          </th>
        </tr>
        <!-- Create -->
        <tr>
          <td>
            POST
          </td>
          <td>
            /tracks
          </td>
          <td>
            Authorization: Bearer {token}<br>
            Content-Type: application/json
          </td>
          <td>
            <code>
                    <pre>{
  "title":"Everning ride",
  "distance":"100",
  "type":"Bike"
}</pre>
                </code>


          </td>
          <td>
            OK: 201, error: 4xx<br>
            
            <code>
              <pre>{
  "title":"Everning ride",
  "distance":"100",
  "type":"Bike",
  "hashString":"f92ec30a223bb7ea"
}</pre>
            </code>
            
          </td>
          <td>
            Create track
          </td>
        </tr>

        <!-- Create -->
        <tr>
          <td>
            POST
          </td>
          <td>
            /tracks
          </td>
          <td>
            Authorization: Bearer {token}<br>
            Content-Type: application/json
          </td>
          <td>
            <code>
                    <pre>{
  "title":"Everning ride",
  "distance":"100",
  "type":"Bike"
}</pre>
                </code>


          </td>
          <td>
            OK: 201, error: 4xx<br>
            
            <code>
              <pre>{
  "title":"Everning ride",
  "distance":"100",
  "type":"Bike",
  "hashString":"f92ec30a223bb7ea"
}</pre>
            </code>
            
          </td>
          <td>
            Create track
          </td>
        </tr>


      </tbody>
    </table>
  </div>
</body>

</html>